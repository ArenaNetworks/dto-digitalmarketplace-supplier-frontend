{% extends "_base_page.html" %}
{% import "macros/toolkit_forms.html" as forms %}

{% block page_title %}G-Cloud 7 supplier declaration â€“ Digital Marketplace{% endblock %}

{% block breadcrumb %}
  {%
    with items = [
      {
        "link": "/",
        "label": "Digital Marketplace"
      },
      {
        "link": url_for(".dashboard"),
        "label": current_user.supplier_name
      },
      {
        "link": url_for(".framework_dashboard"),
        "label": "Apply to G-Cloud 7"
      }
    ]
  %}
    {% include "toolkit/breadcrumb.html" %}
  {% endwith %}
{% endblock %}

{% block main_content %}

  {% if errors %}
    {% with errors = errors.values() %}
      {% include 'toolkit/forms/validation.html' %}
    {% endwith %}
  {% endif %}

  <style>
    .question-heading,
    .question-heading-with-hint {
      font-size: 19px;
      font-weight: normal;
    }
    .question-heading li,
    .question-heading-with-hint li,
    .hint li {
      margin: 10px 0;
      list-style: disc;
    }
    .question-number {
      position: relative;
      height: 50px;
      display: block;
      margin: 20px 0 -70px 0;
      left: -100px;
      width: 80px;
      text-align: right;
      font-weight: bold;
    }
  </style>

  <div class="grid-row">
    <div class="column-three-quarters">

      <form method="post">

        {% for section in sections %}
          {% with
            heading = section.name,
            smaller = true
          %}
            {% include 'toolkit/page-heading.html' %}
          {% endwith %}
          {% for question in section.questions %}
            <span class="question-number" title="{{ question.id }}">
              {{ loop.index }}
            </span>
            {% if errors and errors[question.id] %}
              {{ forms[question.type](question, service_data, errors) }}
            {% else %}
              {{ forms[question.type](question, service_data, {}) }}
            {% endif %}
          {% endfor %}
        {% endfor %}

        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        {%
          with
          label="Submit",
          type="save"
        %}
          {% include "toolkit/button.html" %}
        {% endwith %}

        <a href="/suppliers">Return to application</a>

      </form>
    </div>
  </div>
{% endblock %}
